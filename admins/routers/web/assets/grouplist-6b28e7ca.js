import{L as N,M as S,r as w,f as c,c as l,b as t,q as M,v as R,u as n,N as $,F as C,e as T,d as V,p as F,R as L,o as r,l as D,t as d,i as G}from"./index-611f2efb.js";import{_ as P}from"./avatar-8d37b2c3.js";import"./common-bf7d9f43.js";function q(g={}){let{limit:u=50,offset:m,app_key:_}=g,p=`${N.GROUP_MANAGER_LIST}?app_key=${_}&count=${u}&offset=${m}`;return S(p,{method:"GET"})}const A={getList:q},B={class:"mb-4 cim-log-contanier"},I={class:"cim-log-header"},U={class:"cim-log-header-lf-box"},K={class:"cim-log-lf-item"},O={class:"cim-log-body"},H={class:"table cim-table"},j={class:"cim-td-c cim-td-group-name"},z={class:"cim-userlist-info"},J={class:"nickname"},Q={class:"cim-td-c"},W={class:"cim-td-c"},X={class:"cim-td-c"},Y={class:"cim-log-footer"},Z={class:"cim-navigation"},tt={class:"pagination"},st={class:"page-item"},it={__name:"grouplist",setup(g){const u=G();let m=F(),{currentRoute:{_rawValue:{params:{app_key:_}}}}=m,p={offset:"",limit:50,app_key:_,user_id:"",keywords:""},a=w({params:c.clone(p),list:[],isFinished:!1});function k(i,o="yyyy-MM-dd"){return c.formatTime(new Date(i).getTime(),o)}function y(){f()}function b(){a.params,f()}function f(){let i={...a.params};A.getList(i).then(o=>{let{code:s,data:x,msg:E=""}=o;if(c.isEqual(s,L.SUCCESS)){let{items:h,offset:v=""}=x;h=c.map(h,e=>(e.statusName=e.status==0?"正常":"已封禁",e.phone=e.phone||"-",e.account=e.account||"-",e.email=e.email||"-",e.time=k(e.created_time,"yyyy-MM-dd hh:mm:ss"),e)),a.list=a.list.concat(h),v==""&&(a.isFinished=!0),a.params.offset=v}else u.proxy.$toast({icon:"error",text:`Error: ${s} ${E}`})})}return f(),(i,o)=>(r(),l("div",B,[t("div",I,[t("ul",U,[t("li",K,[M(t("input",{class:"form-control",type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>n(a).params.keywords=s),placeholder:"群组名称",autocomplete:"off",onKeydown:$(y,["enter"])},null,544),[[R,n(a).params.keywords]])]),t("li",{class:"cim-log-lf-item"},[t("div",{class:"cim-button cim-button-bg",onClick:y},"查询")])])]),t("div",O,[t("table",H,[o[1]||(o[1]=t("thead",null,[t("tr",null,[t("th",{class:"cim-td-c"},"群组名称"),t("th",{class:"cim-td-c"},"群组人数"),t("th",{class:"cim-td-c"},"群组 ID"),t("th",{class:"cim-td-c"},"创建时间")])],-1)),t("tbody",null,[(r(!0),l(C,null,T(n(a).list,s=>(r(),l("tr",null,[t("td",j,[t("div",z,[D(P,{"user-id":s.group_id,name:s.group_name,avatar:s.group_portrait,cls:"cim-small-avatar"},null,8,["user-id","name","avatar"]),t("div",J,d(s.group_name),1)])]),t("td",Q,d(s.member_count),1),t("td",W,d(s.group_id),1),t("td",X,d(s.time),1)]))),256))])])]),t("div",Y,[t("nav",Z,[t("ul",tt,[t("li",st,[n(a).isFinished?V("",!0):(r(),l("a",{key:0,class:"page-link",href:"#","aria-label":"Next",onClick:b},o[2]||(o[2]=[t("span",{"aria-hidden":"true"},"下一页",-1)])))])])])])]))}};export{it as default};
