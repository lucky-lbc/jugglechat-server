import{Z as E,G as l,p as L,H as a,o as $,c as A,l as t,w as o,O as v,u as M,$ as G,A as S,b as H,r as O,a0 as Z,a1 as W,a2 as q,a3 as j}from"./index-0f2e41f6.js";function P({title:V="",text:_="",icon:u="success"}){window.$toast({icon:u,text:_,title:V})}const I={__name:"sensitive_data_edit",emits:["reloadTable"],setup(V,{expose:_,emit:u}){const w=u,d=E(),f=l(!1),s=l(!1),r=l(k({})),i=l({}),p=l(!1);let b=L(),{currentRoute:{_rawValue:{params:{app_key:h}}}}=b;const c=[{label:"过滤",value:1},{label:"替换（****）",value:2}];function k(n={}){return{id:n.id||0,word:n.word||"",wordType:n.wordType||1}}function x(){s.value=!0}function T(n){n.preventDefault(),p.value=!0,i.value.validate(e=>{e?d.error("请填写完整信息"):S.addSensitiveWord({app_key:h,word:r.value.word,word_type:r.value.wordType}).then(m=>{P({text:"添加成功"}),w("reloadTable"),s.value=!1}).finally(()=>{p.value=!1})})}function C(){s.value=!1,f.value=!1}return _({openModal:x}),(n,e)=>{const m=a("n-input"),g=a("n-form-item"),y=a("n-gi"),F=a("n-select"),N=a("n-grid"),D=a("n-form"),z=a("n-spin"),U=a("n-scrollbar"),B=a("n-button"),K=a("n-space");return $(),A("div",null,[t(M(G),{show:s.value,"onUpdate:show":e[2]||(e[2]=R=>s.value=R),"mask-closable":!1,"show-icon":!1,preset:"dialog","transform-origin":"center",title:"添加敏感词",style:{width:840}},{action:o(()=>[t(K,null,{default:o(()=>[t(B,{onClick:C},{default:o(()=>e[3]||(e[3]=[v(" 取消")])),_:1}),t(B,{type:"info",loading:p.value,onClick:T},{default:o(()=>e[4]||(e[4]=[v(" 确定")])),_:1},8,["loading"])]),_:1})]),default:o(()=>[t(U,{style:{"max-height":"87vh"},class:"pr-5"},{default:o(()=>[t(z,{show:f.value,description:"请稍候..."},{default:o(()=>[t(D,{ref_key:"formRef",ref:i,model:r.value,"label-placement":"left","label-width":100,class:"py-4"},{default:o(()=>[t(N,{cols:"1 s:1 m:1 l:1 xl:1 2xl:1",responsive:"screen"},{default:o(()=>[t(y,{span:"1"},{default:o(()=>[t(g,{label:"敏感词",path:"word"},{default:o(()=>[t(m,{placeholder:"请输入敏感词",value:r.value.word,"onUpdate:value":e[0]||(e[0]=R=>r.value.word=R)},null,8,["value"])]),_:1})]),_:1}),t(y,{span:"1"},{default:o(()=>[t(g,{label:"过滤类型",path:"wordType"},{default:o(()=>[t(F,{placeholder:"请选择过滤类型",value:r.value.wordType,"onUpdate:value":e[1]||(e[1]=R=>r.value.wordType=R),options:c},null,8,["value"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])])}}},J={__name:"importWords",emits:["reloadTable"],setup(V,{expose:_,emit:u}){const w=u,d=E(),f=l(!1),s=l(!1),r=l({}),i=l({}),p=l(!1);let b=L(),{currentRoute:{_rawValue:{params:{app_key:h}}}}=b,c=null;function k(n){n.target.files.length>0&&(c=n.target.files[0])}function x(){s.value=!0}function T(n){n.preventDefault(),p.value=!0,i.value.validate(e=>{e?d.error("请填写完整信息"):(console.log(c),S.importSensitiveWords(h,c).then(m=>{P({text:"导入成功"}),w("reloadTable"),s.value=!1}).finally(()=>{p.value=!1}))})}function C(){s.value=!1,f.value=!1}return _({openModal:x}),(n,e)=>{const m=a("n-form-item"),g=a("n-gi"),y=a("n-grid"),F=a("n-form"),N=a("n-spin"),D=a("n-scrollbar"),z=a("n-button"),U=a("n-space");return $(),A("div",null,[t(M(G),{show:s.value,"onUpdate:show":e[0]||(e[0]=B=>s.value=B),"mask-closable":!1,"show-icon":!1,preset:"dialog","transform-origin":"center",title:"导入词库",style:{width:840}},{action:o(()=>[t(U,null,{default:o(()=>[t(z,{onClick:C},{default:o(()=>e[1]||(e[1]=[v(" 取消")])),_:1}),t(z,{type:"info",loading:p.value,onClick:T},{default:o(()=>e[2]||(e[2]=[v(" 确定")])),_:1},8,["loading"])]),_:1})]),default:o(()=>[t(D,{style:{"max-height":"87vh"},class:"pr-5"},{default:o(()=>[t(N,{show:f.value,description:"请稍候..."},{default:o(()=>[t(F,{ref_key:"formRef",ref:i,model:r.value,"label-placement":"left","label-width":100,class:"py-4"},{default:o(()=>[t(y,{cols:"1 s:1 m:1 l:1 xl:1 2xl:1",responsive:"screen"},{default:o(()=>[t(g,{span:"1"},{default:o(()=>[t(m,{label:"词库",path:"word"},{default:o(()=>[H("input",{type:"file",onChange:k},null,32)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]),_:1})]),_:1},8,["show"])])}}},Q={class:"tab-content"},X={style:{"margin-bottom":"10px"}},ee={__name:"sensitive",setup(V){let _=L(),{currentRoute:{_rawValue:{params:{app_key:u}}}}=_,w=O({list:[]});l(0);const d=l(!1),f=l(),s=l(),r=l({word:""});function i(){k({page:1,size:10,app_key:u})}function p(){f.value.openModal()}function b(){s.value.openModal()}const h=l([{title:"词语",key:"word"},{title:"过滤类型",key:"word_type",render(n){return q(j,{type:n.word_type===1?"success":"info"},{default:()=>n.word_type===1?"过滤":"替换（****）"})}},{title:"操作",key:"actions",render(n){return q(W,{strong:!0,tertiary:!0,size:"small",type:"error",onClick:()=>C(n)},{default:()=>"删除"})}}]),c=l({});i();function k(n){d.value=!0,S.getSensitiveList({...n,word:r.value.word||""}).then(e=>{w.list=e.data.items||[],c.value={page:e.data.page,itemCount:e.data.total,pageSize:10}}).finally(()=>{d.value=!1})}function x(n){d.value=!0,S.getSensitiveList({page:n,size:10,appKey:u,word:r.value.word||""}).then(e=>{e.data.list,c.value={page:e.data.page,itemCount:e.data.total,pageSize:10}}).finally(()=>{d.value=!1})}const T=Z();function C(n){T.warning({title:"警告",content:"你确定要删除？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{S.deleteSensitiveWord({app_key:u,word:n.word}).then(e=>{e.code===0&&P({text:"删除成功"}),i()})}})}return(n,e)=>{const m=a("n-data-table"),g=a("n-card");return $(),A("div",Q,[t(g,{bordered:!1,class:"proCard"},{default:o(()=>[H("div",X,[t(M(W),{type:"primary",size:"small",onClick:p},{default:o(()=>e[0]||(e[0]=[v(" 添加")])),_:1}),e[2]||(e[2]=v("   ")),t(M(W),{type:"default",size:"small",onClick:b},{default:o(()=>e[1]||(e[1]=[v(" 导入词库")])),_:1})]),t(m,{remote:"",ref:"table",columns:h.value,data:M(w).list,loading:d.value,"row-key":y=>y.id,"onUpdate:page":x},null,8,["columns","data","loading","row-key"])]),_:1}),t(I,{ref_key:"editRef",ref:f,onReloadTable:i},null,512),t(J,{ref_key:"importRef",ref:s,onReloadTable:i},null,512)])}}};export{ee as default};
