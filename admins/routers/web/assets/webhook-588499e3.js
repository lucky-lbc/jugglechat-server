import{A as m,f as l,r as x,c as i,b as e,q as _,v as b,u as n,F as p,e as h,p as w,o as a,t as v,i as y}from"./index-0f2e41f6.js";const E={class:"mb-4 app-base cim-cb-box"},C={class:"row cim-cb-row cim-cb-header"},V={class:"cim-cb-form"},B={class:"col-sm-7"},H={class:"row cim-cb-row cim-cb-body"},q={class:"cim-cb-group"},A={class:"cim-cb-group-title"},D={class:"cim-cb-group-content"},F={class:"cim-form-check form-switch"},N={class:"form-check-label"},R=["checked","id"],I={__name:"webhook",setup(S){let f=w(),{currentRoute:{_rawValue:{params:{app_key:u}}}}=f;const g=y();m.getEventHook({app_key:u}).then(({data:c={}})=>{let{event_sub_config:t,event_sub_switch:s}=c;l.extend(o,{config:t,hooks:s})});let o=x({hooks:[],config:{}});function k(c){l.forEach(o.hooks,t=>{l.forEach(t.items,s=>{l.isEqual(s.key,c.target.id)&&(s.value=Number(c.target.checked))})}),d()}function d(){let{config:c,hooks:t}=o;m.setEventHook({app_key:u,config:c,hooks:t}).then(()=>{g.proxy.$toast({icon:"success",text:"保存成功"})})}return(c,t)=>(a(),i("div",E,[e("div",C,[e("div",V,[t[2]||(t[2]=e("label",{class:"col-sm-1 col-form-label"},[e("div",{class:"cim-cb-input-item"},"设置事件地址"),e("div",{class:"cim-cb-input-item"},"设置鉴权凭证")],-1)),e("div",B,[_(e("input",{class:"form-control cim-cb-input-item",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>n(o).config.event_sub_url=s),placeholder:"请输入事件地址"},null,512),[[b,n(o).config.event_sub_url]]),_(e("input",{class:"form-control cim-cb-input-item",type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>n(o).config.event_sub_auth=s),placeholder:"请输入鉴权凭证，凭证会与事件一起回调给业务服务器"},null,512),[[b,n(o).config.event_sub_auth]])]),e("div",{class:"col-sm-3 cim-cb-btns"},[e("div",{class:"cim-button cim-button-bg",onClick:d},"保存")])])]),e("div",H,[(a(!0),i(p,null,h(n(o).hooks,s=>(a(),i("div",q,[e("div",A,v(s.name),1),e("div",D,[(a(!0),i(p,null,h(s.items,r=>(a(),i("div",F,[e("label",N,v(r.name),1),e("input",{class:"form-check-input",type:"checkbox",checked:r.value,id:r.key,onChange:k},null,40,R)]))),256))])]))),256))])]))}};export{I as default};
